# Example Design

This directory contains an Example Design for the YM2151 running on the Digilent
Nexys4DDR board.

The Example Design consists of the following components
* Clock and Reset generation.
* Controller ROM with predefined commands.
* YM2151 block.
* Clock Domain Crossing.
* Pulse Width Modulator.

## Clock and Reset generation
The example design makes use of two clocks:
* The YM2151 block needs a clock of 3.579 MHz.
* The Pulse Width Modulator needs a clock of 229 MHz.

The ratio of the two clocks is precisely 1:128.

The input frequency to the FPGA on the board is 100 MHz, and a MMCM generates
the 229 MHz clock. The 3.579 Mhz clock is generated by a simple counter.

The reset generation is controlled by the input pin CPU\_RESETN on the board.
The internal reset is held high for 36 clock cycles to ensure that the YM2151
is completely reset.

## Controller ROM with predefined commands.
The build script takes as input a binary file rom.bin, which consists of a
sequence of two-byte commands: First byte is the YM2151 register address and
the second byte is the YM2151 register value.

The address 0x00 is treated as a special value and denotes a pause. The length
of the pause is the second byte, and the units are 2^15 clock cycles, i.e.
approximately nine milli seconds.
