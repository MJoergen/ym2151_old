10 REM THIS PROGRAM TESTS THE YM2151 SOUND CHIP

100 READ AD, VA
110 IF AD = 2 THEN GOTO 200
120 IF AD = 4 THEN END
130 POKE $9FE0, AD
140 POKE $9FE1, VA
150 GOTO 100

200 T=TI+VA
210 PRINT TI;VA;T
220 IF TI < T THEN GOTO 220
230 GOTO 100

999 REM RESET THE YM2151 CHIP
1000 DATA $01, $02: REM LFO RESET
1010 DATA $18, $00: REM LOW OSCILLATION FREQUENCY
1020 DATA $1B, $00: REM DISABLE CT1 AND CT2
1030 DATA $19, $FF: REM PHASE DEPTH = 127
1040 DATA $19, $7F: REM AMPLITUDE DEPTH = 127

1099 REM DISABLE CHANNEL 0
1100 DATA $08, $00: REM CHANNEL 0 KEY OFF
1100 DATA $20, $C0: REM CHANNEL 0 CONTROL

1999 REM CONFIGURE CHANNEL 0
2530 DATA $40, $00: REM CHANNEL 0 MODULATOR1 DETUNE + PHASE MULT
2540 DATA $60, $0E: REM CHANNEL 0 MODULATOR1 TOTAL LEVEL
2550 DATA $80, $9F: REM CHANNEL 0 MODULATOR1 ATTACK RATE
2560 DATA $A0, $1B: REM CHANNEL 0 MODULATOR1 FIRST DECAY RATE
2570 DATA $C0, $09: REM CHANNEL 0 MODULATOR1 SECOND DECAY RATE
2580 DATA $E0, $B6: REM CHANNEL 0 MODULATOR1 RELEASE RATE

2590 DATA $48, $00: REM CHANNEL 0 MODULATOR2
2600 DATA $68, $16: REM CHANNEL 0 MODULATOR2
2610 DATA $88, $DC: REM CHANNEL 0 MODULATOR2
2620 DATA $A8, $05: REM CHANNEL 0 MODULATOR2
2630 DATA $C8, $0F: REM CHANNEL 0 MODULATOR2
2640 DATA $E8, $B5: REM CHANNEL 0 MODULATOR2

2650 DATA $50, $00: REM CHANNEL 0 CARRIER1
2660 DATA $70, $2A: REM CHANNEL 0 CARRIER1
2670 DATA $90, $D8: REM CHANNEL 0 CARRIER1
2680 DATA $B0, $17: REM CHANNEL 0 CARRIER1
2690 DATA $D0, $08: REM CHANNEL 0 CARRIER1
2700 DATA $F0, $B6: REM CHANNEL 0 CARRIER1

2710 DATA $58, $00: REM CHANNEL 0 CARRIER2
2720 DATA $78, $13: REM CHANNEL 0 CARRIER2
2730 DATA $98, $98: REM CHANNEL 0 CARRIER2
2740 DATA $B8, $00: REM CHANNEL 0 CARRIER2
2750 DATA $D8, $0F: REM CHANNEL 0 CARRIER2
2760 DATA $F8, $F6: REM CHANNEL 0 CARRIER2

2770 DATA $20, $E8: REM CHANNEL CONTROL (FB=1)
2780 DATA $38, $00: REM CHANNEL 0 MODULATION SENSITIVITY

3540 DATA $02, $20: REM PAUSE 32

4000 DATA $08, $00: REM CHANNEL 0 KEY OFF
4010 DATA $28, $30: REM CHANNEL 0 KEY CODE
4020 DATA $08, $78: REM CHANNEL 0 KEY ON
4030 DATA $02, $20: REM PAUSE 32

4100 DATA $08, $00: REM CHANNEL 0 KEY OFF
4110 DATA $28, $31: REM CHANNEL 0 KEY CODE
4120 DATA $08, $78: REM CHANNEL 0 KEY ON
4130 DATA $02, $20: REM PAUSE 32

4200 DATA $08, $00: REM CHANNEL 0 KEY OFF
4210 DATA $28, $32: REM CHANNEL 0 KEY CODE
4220 DATA $08, $78: REM CHANNEL 0 KEY ON
4230 DATA $02, $20: REM PAUSE 32

4300 DATA $08, $00: REM CHANNEL 0 KEY OFF
4310 DATA $28, $34: REM CHANNEL 0 KEY CODE
4320 DATA $08, $78: REM CHANNEL 0 KEY ON
4330 DATA $02, $20: REM PAUSE 32

4400 DATA $08, $00: REM CHANNEL 0 KEY OFF
4410 DATA $28, $35: REM CHANNEL 0 KEY CODE
4420 DATA $08, $78: REM CHANNEL 0 KEY ON
4430 DATA $02, $20: REM PAUSE 32

4500 DATA $08, $00: REM CHANNEL 0 KEY OFF
4510 DATA $28, $36: REM CHANNEL 0
4520 DATA $08, $78: REM CHANNEL 0 KEY ON
4530 DATA $02, $20: REM PAUSE 32

4600 DATA $08, $00: REM CHANNEL 0 KEY OFF
4610 DATA $28, $38: REM CHANNEL 0
4620 DATA $08, $78: REM CHANNEL 0 KEY ON
4630 DATA $02, $20: REM PAUSE 32

8560 DATA $04, $00: REM

