10 REM THIS PROGRAM IS PART 3 OF THE YM2151 TUTORIAL.
20 REM IT DEMONSTRATES HOW TO PLAY A SIMPLE TUNE WITH MULTIPLE
30 REM SIMULTANEOUS CHANNELS.

90 NT=TI+2
100 WHILE TI<>NT THEN GOTO 100
110 FOR C=0 TO 3
120 READ N$
130 IF N$="X" THEN END
140 IF N$<>"" THEN GOSUB 400
150 NEXT C
160 NT=NT+10
170 GOTO 100

400 REM THIS PLAYS THE NOTE IN N$ ON CHANNEL C.
410 K=VAL(N$(0)):O=VAL(N$(1))
490 RETURN




800 REM INITIALIZE THE CHANNELS
810 FOR C=0 TO 3
820 GOSUB 900
830 NEXT C
840 RETURN

900 REM INTIALIZE A SINGLE CHANNEL (NUMBER IN C)
910 READ V: POKE $9FE0, $20+C: POKE $9FE1, V
920 READ V: POKE $9FE0, $80+C: POKE $9FE1, V
930 READ V: POKE $9FE0, $A0+C: POKE $9FE1, V
940 READ V: POKE $9FE0, $C0+C: POKE $9FE1, V
950 READ V: POKE $9FE0, $E0+C: POKE $9FE1, V
960 RETURN

1000 REM INITIALIZE CHANNEL 0
1010 DATA $C7, $1F, $0A, $00, $FF
1100 REM INITIALIZE CHANNEL 1
1110 DATA $C7, $1F, $0A, $00, $FF
1200 REM INITIALIZE CHANNEL 2
1210 DATA $C7, $1F, $0A, $00, $FF
1300 REM INITIALIZE CHANNEL 3
1310 DATA $C7, $1F, $0A, $00, $FF

2000 REM THE MUSICAL SCORE STARTS HERE.
2010 REM FOUR VALUES IN EACH LINE, ONE FOR EACH CHANNEL.
2020 REM EACH LINE CORRESPONDS TO 1/8 OF A BAR.
2030 REM "" MEANS CONTINUE PREVIOUS NOTE.

2100 REM TWINKLE, 

2100 REM TWINKLE, TWINKLE LITTLE STAR. (C C F C)
2110 DATA "C5", "C4", "",   ""
2120 DATA "",   "",   "E4", "G4"
2130 DATA "G5", "C4", "",   ""
2140 DATA "",   "",   "E4", "G4"
2150 DATA "A5", "F4", "",   ""
2160 DATA "",   "",   "A4", "C4"
2170 DATA "G5", "C4", "",   ""
2180 DATA "",   "",   "E4", "G4"

2200 REM HOW I WONDER WHAT YOU ARE. (F C G C)
2210 DATA "F5", "F4", "",   ""
2220 DATA "",   "",   "A4", "C4"
2230 DATA "E5", "C4", "",   ""
2240 DATA "",   "",   "E4", "G4"
2250 DATA "D5", "G4", "",   ""
2260 DATA "",   "",   "B4", "D4"
2270 DATA "C5", "C4", "",   ""
2280 DATA "",   "",   "E4", "G4"

2300 REM UP ABOVE THE WORLD SO HIGH, (C F C G)
2310 DATA "G5", "C4", "",   ""
2320 DATA "",   "",   "E4", "G4"
2330 DATA "F5", "F4", "",   ""
2340 DATA "",   "",   "A4", "C4"
2350 DATA "E5", "C4", "",   ""
2360 DATA "",   "",   "E4", "G4"
2370 DATA "D5", "G4", "",   ""
2380 DATA "",   "",   "B4", "D4"

2400 REM LIKE A DIAMOND IN THE SKY. (C F C G)
2410 DATA "G5", "C4", "",   ""
2420 DATA "",   "",   "E4", "G4"
2430 DATA "F5", "F4", "",   ""
2440 DATA "",   "",   "A4", "C4"
2450 DATA "E5", "C4", "",   ""
2460 DATA "",   "",   "E4", "G4"
2470 DATA "D5", "G4", "",   ""
2480 DATA "",   "",   "B4", "D4"

2500 REM TWINKLE, TWINKLE LITTLE STAR. (C C F C)
2510 DATA "C5", "C4", "",   ""
2520 DATA "",   "",   "E4", "G4"
2530 DATA "G5", "C4", "",   ""
2540 DATA "",   "",   "E4", "G4"
2550 DATA "A5", "F4", "",   ""
2560 DATA "",   "",   "A4", "C4"
2570 DATA "G5", "C4", "",   ""
2580 DATA "",   "",   "E4", "G4"

2600 REM HOW I WONDER WHAT YOU ARE. (F C G C)
2610 DATA "F5", "F4", "",   ""
2620 DATA "",   "",   "A4", "C4"
2630 DATA "E5", "C4", "",   ""
2640 DATA "",   "",   "E4", "G4"
2650 DATA "D5", "G4", "",   ""
2660 DATA "",   "",   "B4", "D4"
2670 DATA "C5", "C4", "",   ""
2680 DATA "",   "",   "E4", "G4"

2700 DATA "X": REM INDICATE END OF MUSIC
